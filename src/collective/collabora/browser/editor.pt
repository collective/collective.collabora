<tal:def define="
           wopi_url view/wopi_url;
           jwt_token view/jwt_token;
           error view/error;
         ">

  <div tal:condition="error">
    <h2 i18n:translate="label_error">Error</h2>
    <p i18n:translate="error">${error}</p>
  </div>

  <div tal:condition="python: wopi_url and jwt_token and not error">

    <a class="pat-button icon-external"
       href="${wopi_url}&amp;access_token=${view/jwt_token}"
       target="_blank"
       title="Edit"
       i18n:attributes="title"
       i18n:translate=""
    >Edit</a>

    <tal:if condition="nothing">
      <form action="${wopi_url}"
            enctype="multipart/form-data"
            method="post"
            tal:condition="wopi_url"
      >
        <input name="access_token"
               type="hidden"
               value="${view/jwt_token}"
        />
        <button class="pat-button icon-external"
                title="Edit"
                type="submit"
                i18n:attributes="title"
                i18n:domain="ploneintranet"
                i18n:translate=""
        >Edit</button>
      </form>
    </tal:if>
  </div>
</tal:def>
